# MAX Platform Backend Environment Configuration Template
# Copy this file to .env and fill in your actual values

# =================
# Database Configuration
# =================
# Database type: postgresql, mysql, or mssql
DATABASE_TYPE=postgresql

# Primary database URL (used based on DATABASE_TYPE)
DATABASE_URL=postgresql://user:password@localhost:5432/database_name

# Alternative database configurations (legacy support)
#MYSQL_DATABASE_URL=mysql+pymysql://user:password@localhost:3306/database_name
#MSSQL_DATABASE_URL=mssql+pyodbc://user:password@localhost:1433/database_name?driver=ODBC+Driver+17+for+SQL+Server

# =================
# Security & JWT Configuration
# =================
# IMPORTANT: Change these in production!
SECRET_KEY=your-secret-key-here-change-this-in-production
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30
REFRESH_TOKEN_EXPIRE_DAYS=7

# =================
# Service Token Configuration
# =================
SERVICE_TOKEN=your-service-token-here
SERVICE_CLIENT_ID=maxplatform-service
SERVICE_CLIENT_SECRET=your-service-client-secret-here
SERVICE_TOKEN_EXPIRE_HOURS=24

# =================
# Server Configuration
# =================
HOST=0.0.0.0
PORT=8000

# =================
# Jupyter Configuration
# =================
JUPYTER_BASE_URL=http://localhost
JUPYTER_PORT_START=8888
JUPYTER_PORT_END=9100
DATA_DIR=./data

# =================
# ChromaDB Configuration
# =================
CHROMA_HOST=localhost
CHROMA_PORT=8003

# =================
# Database Default Ports (for development)
# =================
DEFAULT_DB_HOST=localhost
DEFAULT_MYSQL_PORT=3306
DEFAULT_POSTGRESQL_PORT=5432
DEFAULT_MSSQL_PORT=1433

# =================
# LLM Configuration
# =================
# Default LLM Provider
DEFAULT_LLM_PROVIDER=ollama
MAX_TOKENS=4000
TEMPERATURE=0.1

# Azure OpenAI Settings (optional)
AZURE_OPENAI_ENDPOINT=https://your-resource.openai.azure.com/
AZURE_OPENAI_API_KEY=your-azure-openai-api-key
AZURE_OPENAI_API_VERSION=2024-02-15-preview
AZURE_OPENAI_DEPLOYMENT_NAME=gpt-4o

# Ollama Settings
OLLAMA_BASE_URL=http://localhost:11434
OLLAMA_DEFAULT_MODEL=llama3.2

# =================
# MAX Platform Environment Configuration
# =================
# Environment: development, staging, or production
MAX_PLATFORM_ENVIRONMENT=development

# Platform API Configuration
MAX_PLATFORM_HOST=0.0.0.0
MAX_PLATFORM_PORT=8000
MAX_PLATFORM_API_URL=http://localhost:8000

# Frontend URL (for OAuth redirects)
MAX_PLATFORM_FRONTEND_URL=http://localhost:3000

# =================
# MAX Platform Service URLs (OAuth Client Registration)
# =================
# MAX FlowStudio
MAX_FLOWSTUDIO_URL=http://localhost:3005
MAX_FLOWSTUDIO_CALLBACK_URL=http://localhost:3005/oauth/callback

# MAX TeamSync
MAX_TEAMSYNC_URL=http://localhost:3015
MAX_TEAMSYNC_CALLBACK_URL=http://localhost:3015/oauth/callback

# MAX Lab
MAX_LAB_URL=http://localhost:3010
MAX_LAB_CALLBACK_URL=http://localhost:3010/oauth/callback

# MAX Workspace
MAX_WORKSPACE_URL=http://localhost:3020
MAX_WORKSPACE_CALLBACK_URL=http://localhost:3020/oauth/callback

# MAX APA
MAX_APA_URL=http://localhost:3035
MAX_APA_CALLBACK_URL=http://localhost:3035/oauth/callback

# MAX MLOps
MAX_MLOPS_URL=http://localhost:3040
MAX_MLOPS_CALLBACK_URL=http://localhost:3040/oauth/callback

# MAX QueryHub
MAX_QUERYHUB_URL=http://localhost:3025
MAX_QUERYHUB_CALLBACK_URL=http://localhost:3025/oauth/callback

# MAX LLM
MAX_LLM_URL=http://localhost:3030
MAX_LLM_CALLBACK_URL=http://localhost:3030/oauth/callback

# =================
# OIDC (OpenID Connect) Configuration
# =================
# OIDC Issuer (defaults to MAX_PLATFORM_API_URL)
#OIDC_ISSUER=http://localhost:8000

# ID Token Settings
OIDC_SIGNING_ALG=RS256
OIDC_KEY_ROTATION_DAYS=90
OIDC_ID_TOKEN_EXPIRE_MINUTES=60

# Migration Settings
OIDC_MIGRATION_ENABLED=true
OIDC_DUAL_MODE=true
OIDC_LEGACY_HS256=true
OIDC_GRACE_PERIOD_DAYS=90

# =================
# Production Environment Example
# =================
# Uncomment and modify for production deployment:
#
# MAX_PLATFORM_ENVIRONMENT=production
# MAX_PLATFORM_HOST=0.0.0.0
# MAX_PLATFORM_PORT=443
# MAX_PLATFORM_API_URL=https://api.maxplatform.com
# MAX_PLATFORM_FRONTEND_URL=https://platform.maxplatform.com
# 
# # Production Service URLs
# MAX_FLOWSTUDIO_URL=https://flowstudio.maxplatform.com
# MAX_FLOWSTUDIO_CALLBACK_URL=https://flowstudio.maxplatform.com/oauth/callback
# MAX_TEAMSYNC_URL=https://teamsync.maxplatform.com
# MAX_TEAMSYNC_CALLBACK_URL=https://teamsync.maxplatform.com/oauth/callback
# # ... (continue for all services)